import{L as g}from"./api-CmsgK-9p.js";import{l as v}from"./index-DP0JwgWw.js";import{d as q,r as b,a as B,c as D,b as t,n as N,u as o,e as s,w as i,f as d,g as R,h as U,i as w,t as F,j as I,k as A,o as h,l as E,_ as L}from"./index-B3mkc1PU.js";import{e as c}from"./3DES-CrfUPAaI.js";const j={class:"login-container"},z={class:"login-form-container"},G={class:"login-form-right"},J={class:"login-form"},O={class:"form-item-input"},P={class:"form-item-input"},T={class:"form-item-input"},$=q({__name:"index",setup(H){const V=I(),n=b({data:{time:60,countdown:!1}}),y=async()=>{if(!await m.value.validateField(["phone","password"])){n.data.countdown=!0,await g.getCodeApi({phone:c(a.data.form.phone),pwd:c(a.data.form.password)});const e=setInterval(()=>{n.data.time--,n.data.time<=0&&(clearInterval(e),n.data.time=60,n.data.countdown=!1)},1e3)}},m=B(),a=b({data:{form:{phone:"13292106089",password:"123456",code:"979559"},rules:{phone:[{required:!0,message:"请输入手机号"}],password:[{required:!0,message:"请输入密码"}],code:[{required:!0,message:"请输入验证码"}]}}}),k=async()=>{if(!await m.value.validate()){const e=c(JSON.stringify(a.data.form)),{data:u}=await g.loginApi(e);E().login(u),V.replace({name:"home"})}};return(p,e)=>{const u=d("icon-mobile"),f=d("a-input"),r=d("a-form-item"),x=d("a-input-password"),_=d("a-button"),C=d("a-form"),S=A("debounce");return h(),D("div",j,[e[7]||(e[7]=t("div",{class:"login-logo-container"},[t("i",{class:"login-logo"})],-1)),t("div",z,[e[6]||(e[6]=t("div",{class:"login-form-left"},null,-1)),t("div",G,[t("div",J,[e[5]||(e[5]=t("p",{class:"login-form-title"},"立即登录",-1)),t("div",{class:N(["login-form-content",{"login-form-content-none":o(v)}])},[s(C,{ref_key:"formRef",ref:m,model:o(a).data.form,rules:o(a).data.rules,layout:"vertical",onSubmit:k},{default:i(()=>[t("div",O,[s(r,{label:"手机号",field:"phone",required:"","asterisk-position":"end","validate-trigger":["change","blur","input"]},{default:i(()=>[s(f,{modelValue:o(a).data.form.phone,"onUpdate:modelValue":e[0]||(e[0]=l=>o(a).data.form.phone=l),placeholder:"请输入手机号"},{suffix:i(()=>[s(u)]),_:1},8,["modelValue"])]),_:1})]),t("div",P,[s(r,{label:"密码",field:"password",required:"","asterisk-position":"end","validate-trigger":["change","blur","input"]},{default:i(()=>[s(x,{modelValue:o(a).data.form.password,"onUpdate:modelValue":e[1]||(e[1]=l=>o(a).data.form.password=l),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1})]),t("div",T,[s(r,{label:"验证码",field:"code",required:"","asterisk-position":"end","validate-trigger":["change","blur","input"]},{default:i(()=>[s(f,{modelValue:o(a).data.form.code,"onUpdate:modelValue":e[2]||(e[2]=l=>o(a).data.form.code=l),placeholder:"请输入验证码"},null,8,["modelValue"]),R((h(),U(_,{class:"form-item-input-code-button",disabled:o(n).data.countdown},{default:i(()=>[w(F(o(n).data.countdown?`${o(n).data.time}秒后重新获取`:"获取验证码"),1)]),_:1},8,["disabled"])),[[S,y,"click"]])]),_:1}),e[3]||(e[3]=t("p",{class:"login-form-updatePassword-button"},"忘记密码？",-1))]),s(r,{"no-style":""},{default:i(()=>[s(_,{class:"login-submit-button","html-type":"submit",loading:o(v)},{default:i(()=>e[4]||(e[4]=[w(" 登 录 ",-1)])),_:1,__:[4]},8,["loading"])]),_:1})]),_:1},8,["model","rules"])],2)])])])])}}}),X=L($,[["__scopeId","data-v-addb70eb"]]);export{X as default};
